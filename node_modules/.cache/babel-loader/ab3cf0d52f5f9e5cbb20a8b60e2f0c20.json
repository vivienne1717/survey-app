{"ast":null,"code":"var _jsxFileName = \"/Users/wei/Desktop/Project/Recommendation/Pre-exp Survey/website/survey-app2/src/Pages/Part1Modal.jsx\";\nimport React from \"react\";\nimport \"./Part1Modal.css\";\nimport { Modal, Button } from 'antd';\nimport { Steps, message } from 'antd';\nimport SurveyWithPoster from './SurveyWithPoster';\nimport Step4Survey from './Step4Survey';\nimport Cookies from 'universal-cookie';\nexport default class Part1Modal extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      step4visible: false,\n      current: 0,\n      current2: 0,\n      navigate: false,\n      step4movies: [{\n        title: null,\n        rating: null,\n        ans: [8, 8, 8, 8, 8, 8, 8]\n      }],\n      instructionVisible: false\n    };\n\n    this.toggleVisible = () => {\n      var visible = this.state.visible;\n      this.setState({\n        visible: !visible\n      });\n    };\n\n    this.handleOk = () => {};\n\n    this.handleCancel = () => {\n      var visible = false;\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCancel2 = () => {\n      var visible = false;\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleInstructionOk = () => {\n      this.setState({\n        instructionVisible: false\n      }, () => {\n        window.location.href = '../Step3';\n      });\n    };\n  }\n\n  next() {\n    //console.log(\"value \" + JSON.stringify(this.props.selectedMovies))\n    if (this.validationSingleRating(this.props.selectedMovies[this.state.current])) {\n      const current = this.state.current + 1;\n      this.setState({\n        current\n      });\n    }\n  }\n\n  validationSingleRating(movie) {\n    var ans = movie.ans;\n\n    if (ans.length == 7) {\n      if (ans[0] == 8 || ans[1] == 8 || ans[2] == 8 || ans[3] == 8 || ans[4] == 8 || ans[5] == 8 || ans[6] == 8) {\n        message.error('Please complete all questions');\n        return false;\n      } else {\n        return true;\n      }\n    }\n  }\n\n  prev() {\n    const current = this.state.current - 1;\n    this.setState({\n      current\n    });\n  }\n\n  validateSingleStep4Movie(movie) {\n    var title = movie.title;\n    var rating = movie.rating;\n    var ans = movie.ans;\n\n    if (title == null || title == '' || rating == null || rating == 0 || ans[0] == 8 || ans[1] == 8 || ans[2] == 8 || ans[3] == 8 || ans[4] == 8 || ans[5] == 8 || ans[6] == 8) {\n      message.error('Please complete all questions');\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  next2() {\n    var step4movies = this.state.step4movies;\n\n    if (this.validateSingleStep4Movie(step4movies[this.state.current2])) {\n      const current2 = this.state.current2 + 1;\n      this.setState({\n        current2\n      });\n    }\n  }\n\n  prev2() {\n    const current2 = this.state.current2 - 1;\n    this.setState({\n      current2\n    });\n  }\n\n  done() {\n    //validate all answers \n    if (!this.props.fromStep3) {\n      var selectedMovies = this.props.selectedMovies;\n\n      for (var i = 0; i < selectedMovies.length; i++) {\n        var movie = selectedMovies[i];\n        var ans = movie.ans;\n\n        for (var i = 0; i < ans.length; i++) {\n          if (ans === 8) {\n            message.error('Please complete survery for movie: ' + movie.title);\n            return false;\n          }\n        }\n      }\n\n      const cookies = new Cookies();\n      cookies.set('survey2', this.reduceCookieSize(selectedMovies), {\n        path: '/'\n      }); // console.log(\"survey 2a \"+ JSON.stringify(cookies.get('survey2a')))\n      //console.log(\"survey 2 \" + JSON.stringify(selectedMovies))\n\n      this.setState({\n        instructionVisible: true\n      });\n    } else {\n      var selectedMovies = this.props.selectedMovies;\n      const cookies = new Cookies();\n      cookies.set('survey3', this.reduceCookieSize(selectedMovies), {\n        path: '/'\n      }); //console.log(\"survey 3: \" + JSON.stringify(selectedMovies))\n\n      this.setState({\n        visible: false,\n        step4visible: true\n      });\n    }\n  }\n\n  reduceCookieSize(selectedMovies) {\n    let slimCookie = [];\n\n    for (var i = 0; i < selectedMovies.length; i++) {\n      var movie = {};\n      movie.title = selectedMovies[i].title;\n      movie.movieId = selectedMovies[i].movieId;\n      movie.rating = selectedMovies[i].rating;\n      movie.ans = selectedMovies[i].ans;\n      slimCookie.push(movie);\n    }\n\n    return slimCookie;\n  }\n\n  done2() {\n    const cookies = new Cookies(); // console.log(\"step 1 \" + JSON.stringify(cookies.get('survey1')))\n    // console.log(\"Survey 2a \"+JSON.stringify(cookies.get('survey2a')))\n    // console.log(\"survey 2 \" + JSON.stringify(cookies.get('survey2')))\n    // console.log(\"survey 3: \" + JSON.stringify(cookies.get('survey3')))\n    // console.log(\"Step 4 \" + JSON.stringify(this.state.step4movies))\n\n    var survey1 = cookies.get('survey1');\n    var survey2 = cookies.get('survey2');\n    var survey3 = cookies.get('survey3');\n    var survey2a = cookies.get('survey2a');\n    var survey4 = this.state.step4movies; //for console print only, to generate sample upload file\n\n    /*var result = {\n         survey1: survey1,\n        survey2: survey2,\n        survey2a:survey2a,\n        survey3: survey3,\n        survey4: survey4\n    }\n    console.log('result '+JSON.stringify(result))*/\n    //need to only validate last survey question survey[2] for three movies\n\n    if (this.validateSingleStep4Movie(survey4[0])) {\n      var db = new window.restdb(\"5e3e33014c212c51488ad26a\");\n      var p = new db.response({\n        survey1: survey1,\n        survey2: survey2,\n        survey2a: survey2a,\n        survey3: survey3,\n        survey4: survey4\n      });\n      p.save();\n      const key = 'updatable';\n      message.loading({\n        content: 'Submitting...',\n        key\n      });\n      setTimeout(() => {\n        message.success({\n          content: 'Sumbitted!',\n          key,\n          duration: 2\n        });\n        cookies.remove('survey1', {\n          path: '/'\n        });\n        cookies.remove('survey2', {\n          path: '/'\n        });\n        cookies.remove('survey2a', {\n          path: '/'\n        });\n        cookies.remove('survey3', {\n          path: '/'\n        });\n        window.location.href = '../Acknowledge';\n      }, 5000); //change the submit wating time (2000=2s)\n    }\n  }\n\n  render() {\n    var selectedMovies = this.props.selectedMovies;\n    var step4movies = this.state.step4movies;\n    const Step = Steps.Step;\n    var steps;\n\n    if (this.props.fromStep3) {\n      steps = [{\n        title: '1st Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[0],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, \"1\")\n      }, {\n        title: '2nd Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[1],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        }, \"2\")\n      }, {\n        title: '3rd Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[2],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244\n          },\n          __self: this\n        }, \"3\")\n      }];\n    } else {\n      steps = [{\n        title: '1st Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[0],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        }, \"1\")\n      }, {\n        title: '2nd Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[1],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        }, \"2\")\n      }, {\n        title: '3rd Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[2],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, \"3\")\n      }, {\n        title: '4th Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[3],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268\n          },\n          __self: this\n        }, \"4\")\n      }, {\n        title: '5th Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[4],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273\n          },\n          __self: this\n        }, \"5\")\n      }];\n    }\n\n    const step4Survey = [{\n      title: 'Movie',\n      content: React.createElement(Step4Survey, {\n        movie: step4movies[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      })\n    }];\n    const current = this.state.current;\n    const current2 = this.state.current2;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      visible: this.state.visible,\n      title: this.props.fromStep3 ? '' : \"Survey Part 2\",\n      onOk: this.handleOk,\n      width: 1300,\n      closable: false,\n      maskClosable: false,\n      onCancel: this.handleCancel,\n      footer: null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"instruction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, \"Please answer 7 questions for each movie.\"), React.createElement(Steps, {\n      current: current,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, steps.map(item => React.createElement(Step, {\n      key: item.title,\n      title: item.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"steps-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, steps[current].content), React.createElement(\"div\", {\n      className: \"steps-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, current > 0 && React.createElement(Button, {\n      onClick: () => this.prev(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, \"Previous\"), current < steps.length - 1 && React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.next(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, \"Next\"), current === steps.length - 1 && React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.done(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, this.props.fromStep3 ? 'Proceed to part 4' : 'Proceed to part 3'))), React.createElement(Modal, {\n      visible: this.state.step4visible,\n      title: \"Survey Part 4\",\n      onOk: this.handleOk,\n      width: window.innerWidth - 100,\n      closable: false,\n      maskClosable: false,\n      onCancel: this.handleCancel,\n      footer: null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"instruction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, \"Please list one movie that is different from the movies you usually watch, yet you will find interesting if your friend recommends it to you.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }), \"This movie should not be one of the movies that you have just rated.\"), React.createElement(Steps, {\n      current: current2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, step4Survey.map(item => React.createElement(Step, {\n      key: item.title,\n      title: item.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"steps-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, step4Survey[current2].content), React.createElement(\"div\", {\n      className: \"steps-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, current2 > 0 && React.createElement(Button, {\n      onClick: () => this.prev2(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, \"Previous\"), current2 < step4Survey.length - 1 && React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.next2(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, \"Next\"), current2 === step4Survey.length - 1 && React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.done2(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }, \"Sumbit Survey\"))), React.createElement(Modal, {\n      visible: this.state.instructionVisible,\n      title: \"Survey Part 3\",\n      onOk: this.handleOk,\n      width: window.innerWidth - 500,\n      closable: false,\n      maskClosable: false,\n      footer: null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"question\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, \"Instruction:\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }), \"Please select 3 more watched movies that are different from the movies you usually watch yet are interesting to you.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }), \"Kindly avoid the 5 movies which you have already answered questions about.\"), React.createElement(\"div\", {\n      style: {\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.handleInstructionOk(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }, \"Proceed\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/wei/Desktop/Project/Recommendation/Pre-exp Survey/website/survey-app2/src/Pages/Part1Modal.jsx"],"names":["React","Modal","Button","Steps","message","SurveyWithPoster","Step4Survey","Cookies","Part1Modal","Component","state","visible","step4visible","current","current2","navigate","step4movies","title","rating","ans","instructionVisible","toggleVisible","setState","handleOk","handleCancel","handleCancel2","handleInstructionOk","window","location","href","next","validationSingleRating","props","selectedMovies","movie","length","error","prev","validateSingleStep4Movie","next2","prev2","done","fromStep3","i","cookies","set","reduceCookieSize","path","slimCookie","movieId","push","done2","survey1","get","survey2","survey3","survey2a","survey4","db","restdb","p","response","save","key","loading","content","setTimeout","success","duration","remove","render","Step","steps","step4Survey","map","item","marginLeft","innerWidth","textAlign"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Part1Modal.css\";\nimport { Modal, Button } from 'antd';\nimport { Steps, message } from 'antd';\nimport SurveyWithPoster from './SurveyWithPoster';\nimport Step4Survey from './Step4Survey';\nimport Cookies from 'universal-cookie';\n\nexport default class Part1Modal extends React.Component {\n\n  /* example of this.props.movie\n  \t\"movieId\": 180471,\n\t\"title\": \"The Venerable W.\",\n\t\"directedBy\": \"Barbet Schroeder\",\n\t\"starring\": \"Bulle Ogier,Barbet Schroeder,Ashin Wirathu\",\n\t\"imdbId\": \"6642870\",\n\t\"genres\": \"Documentary\",\n\t\"year\": 2017,\n\t\"posterURL\": \"https://m.media-amazon.com/images/M/MV5BMjI0MDUxNTAzOF5BMl5BanBnXkFtZTgwOTEwOTIzMjI@._V1_SX300.jpg\"\n  \n  */\n  state = {\n    visible: false,\n    step4visible: false,\n    current: 0,\n    current2: 0,\n    navigate: false,\n    step4movies: [\n      {\n        title: null,\n        rating: null,\n        ans: [8, 8, 8, 8, 8, 8, 8]\n      }],\n    instructionVisible: false\n  }\n\n  toggleVisible = () => {\n    var visible = this.state.visible\n    this.setState({\n      visible: !visible\n    })\n  }\n\n  handleOk = () => {\n\n  }\n  handleCancel = () => {\n    var visible = false;\n    this.setState({\n      visible: false\n    })\n  }\n\n  next() {\n    //console.log(\"value \" + JSON.stringify(this.props.selectedMovies))\n    if (this.validationSingleRating(this.props.selectedMovies[this.state.current])) {\n      const current = this.state.current + 1;\n      this.setState({ current });\n    }\n  }\n\n  validationSingleRating(movie) {\n    var ans = movie.ans\n    if (ans.length == 7) {\n      if (ans[0] == 8 || ans[1] == 8 || ans[2] == 8 || ans[3] == 8 || ans[4] == 8 || ans[5] == 8 || ans[6] ==8){\n        message.error('Please complete all questions')\n        return false;\n      } else {\n        return true;\n      }\n    } }\n\n  prev() {\n    const current = this.state.current - 1;\n    this.setState({ current });\n  }\n\n  handleCancel2 = () => {\n    var visible = false;\n    this.setState({\n      visible: false\n    })\n  }\n\n  validateSingleStep4Movie(movie) {\n    var title = movie.title\n    var rating = movie.rating\n    var ans = movie.ans\n    if (title == null || title == '' ||rating == null || rating == 0 || ans[0] == 8 || ans[1] == 8 || ans[2] == 8 || ans[3] == 8 || ans[4] == 8 || ans[5] == 8 || ans[6] ==8){\n      message.error('Please complete all questions')\n      return false;\n    } else {\n      return true;\n    }\n\n  }\n  next2() {\n    var step4movies = this.state.step4movies\n    if (this.validateSingleStep4Movie(step4movies[this.state.current2])) {\n      const current2 = this.state.current2 + 1;\n      this.setState({ current2 });\n    }\n  }\n\n  prev2() {\n    const current2 = this.state.current2 - 1;\n    this.setState({ current2 });\n  }\n  done() {\n    //validate all answers \n    if (!this.props.fromStep3) {\n      var selectedMovies = this.props.selectedMovies\n\n      for (var i = 0; i < selectedMovies.length; i++) {\n        var movie = selectedMovies[i]\n        var ans = movie.ans\n        for (var i = 0; i < ans.length; i++) {\n          if (ans === 8) {\n            message.error('Please complete survery for movie: ' + movie.title)\n            return false;\n          }\n        }\n      }\n      const cookies = new Cookies();\n      cookies.set('survey2', this.reduceCookieSize(selectedMovies), { path: '/' });\n     // console.log(\"survey 2a \"+ JSON.stringify(cookies.get('survey2a')))\n      //console.log(\"survey 2 \" + JSON.stringify(selectedMovies))\n\n      this.setState({\n        instructionVisible: true\n      })\n    } else {\n      var selectedMovies = this.props.selectedMovies\n\n      const cookies = new Cookies();\n      cookies.set('survey3', this.reduceCookieSize(selectedMovies), { path: '/' });\n      //console.log(\"survey 3: \" + JSON.stringify(selectedMovies))\n      this.setState({\n        visible: false,\n        step4visible: true\n      })\n    }\n  }\n  handleInstructionOk = () => {\n    this.setState({\n      instructionVisible: false\n    }, () => {\n      window.location.href = '../Step3'\n    })\n  }\n\n  reduceCookieSize(selectedMovies){\n    let slimCookie = [] \n    for(var i=0;i<selectedMovies.length;i++){\n      var movie = {}\n      movie.title = selectedMovies[i].title\n      movie.movieId = selectedMovies[i].movieId\n      movie.rating = selectedMovies[i].rating\n      movie.ans = selectedMovies[i].ans\n      slimCookie.push(movie)\n    }\n\n    return slimCookie;\n  }\n\n  done2() {\n\n    const cookies = new Cookies();\n\n    // console.log(\"step 1 \" + JSON.stringify(cookies.get('survey1')))\n    // console.log(\"Survey 2a \"+JSON.stringify(cookies.get('survey2a')))\n    // console.log(\"survey 2 \" + JSON.stringify(cookies.get('survey2')))\n\n    // console.log(\"survey 3: \" + JSON.stringify(cookies.get('survey3')))\n\n    // console.log(\"Step 4 \" + JSON.stringify(this.state.step4movies))\n    var survey1 = cookies.get('survey1')\n    var survey2 = cookies.get('survey2')\n    var survey3 = cookies.get('survey3')\n    var survey2a =  cookies.get('survey2a')\n    var survey4 = this.state.step4movies\n\n    //for console print only, to generate sample upload file\n    /*var result = {\n         survey1: survey1,\n        survey2: survey2,\n        survey2a:survey2a,\n        survey3: survey3,\n        survey4: survey4\n    }\n    console.log('result '+JSON.stringify(result))*/\n    \n    //need to only validate last survey question survey[2] for three movies\n    if (this.validateSingleStep4Movie(survey4[0])) {\n  \n\n      var db = new window.restdb(\"5e3e33014c212c51488ad26a\");\n      var p = new db.response({\n        survey1: survey1,\n        survey2: survey2,\n        survey2a:survey2a,\n        survey3: survey3,\n        survey4: survey4\n      });\n      p.save();\n\n      const key = 'updatable';\n      message.loading({ content: 'Submitting...', key });\n      setTimeout(() => {\n        message.success({ content: 'Sumbitted!', key, duration: 2 });\n           cookies.remove('survey1', { path: '/' });\n       cookies.remove('survey2', { path: '/' });\n       cookies.remove('survey2a', { path: '/' });\n       cookies.remove('survey3', { path: '/' });\n        window.location.href = '../Acknowledge'\n      }, 5000);//change the submit wating time (2000=2s)\n    }\n  }\n\n  \n\n  render() {\n\n    var selectedMovies = this.props.selectedMovies\n    var step4movies = this.state.step4movies\n\n    const { Step } = Steps;\n\n    var steps;\n    if (this.props.fromStep3) {\n      steps = [\n        {\n          title: '1st Movie',\n          content: <SurveyWithPoster movie={selectedMovies[0]}>1</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '2nd Movie',\n          content: <SurveyWithPoster movie={selectedMovies[1]}>2</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '3rd Movie',\n          content: <SurveyWithPoster movie={selectedMovies[2]}>3</SurveyWithPoster>\n          ,\n        }\n      ];\n\n    } else {\n      steps = [\n        {\n          title: '1st Movie',\n          content: <SurveyWithPoster movie={selectedMovies[0]}>1</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '2nd Movie',\n          content: <SurveyWithPoster movie={selectedMovies[1]}>2</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '3rd Movie',\n          content: <SurveyWithPoster movie={selectedMovies[2]}>3</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '4th Movie',\n          content: <SurveyWithPoster movie={selectedMovies[3]}>4</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '5th Movie',\n          content: <SurveyWithPoster movie={selectedMovies[4]}>5</SurveyWithPoster>\n          ,\n        }\n      ];\n    }\n\n    const step4Survey = [\n      {\n        title: 'Movie',\n        content: <Step4Survey movie={step4movies[0]}></Step4Survey>\n      }]\n\n\n    const { current } = this.state;\n    const { current2 } = this.state;\n\n    return (\n\n      <div>\n        <Modal\n          visible={this.state.visible}\n          title={this.props.fromStep3 ? '' : \"Survey Part 2\"}\n          onOk={this.handleOk}\n          width={1300}\n          closable={false}\n          maskClosable={false}\n          onCancel={this.handleCancel}\n          footer={null}\n        >\n          \n          <div className='instruction'>\n            Please answer 7 questions for each movie.  \n          </div>\n         \n          <Steps current={current}>\n            {steps.map(item => (\n              <Step key={item.title} title={item.title} />\n            ))}\n          </Steps>\n          <div className=\"steps-content\">{steps[current].content}</div>\n          <div className=\"steps-action\">\n            {current > 0 && (\n              <Button onClick={() => this.prev()}>\n                Previous\n            </Button>\n            )}\n            {current < steps.length - 1 && (\n              <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.next()}>\n                Next\n            </Button>\n            )}\n            {current === steps.length - 1 && (\n              <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.done()}>\n\n                {this.props.fromStep3 ? 'Proceed to part 4' : 'Proceed to part 3'}\n              </Button>\n            )}\n\n          </div>\n\n        </Modal>\n        \n        <Modal\n          visible={this.state.step4visible}\n          title=\"Survey Part 4\"\n          onOk={this.handleOk}\n          width={window.innerWidth-100}\n          closable={false}\n          maskClosable={false}\n          onCancel={this.handleCancel}\n          footer={null}\n        >\n          <div className='instruction'>\n            Please list one movie that is different from the movies you usually watch, yet you will find interesting if your friend recommends it to you. \n            <br />\n            This movie should not be one of the movies that you have just rated.\n          </div>\n          <Steps current={current2}>\n            {step4Survey.map(item => (\n              <Step key={item.title} title={item.title} />\n            ))}\n          </Steps>\n          <div className=\"steps-content\">{step4Survey[current2].content}</div>\n          <div className=\"steps-action\">\n            {current2 > 0 && (\n              <Button onClick={() => this.prev2()}>\n                Previous\n            </Button>\n            )}\n            {current2 < step4Survey.length - 1 && (\n              <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.next2()}>\n                Next\n            </Button>\n            )}\n            {current2 === step4Survey.length - 1 && (\n              <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.done2()}>\n                Sumbit Survey\n              </Button>\n            )}\n\n          </div>\n        </Modal>\n\n        <Modal\n          visible={this.state.instructionVisible}\n          title=\"Survey Part 3\"\n          onOk={this.handleOk}\n          width={window.innerWidth-500}\n          closable={false}\n          maskClosable={false}\n          footer={null}\n        >\n          <div className='question'>\n            Instruction: \n            <br /><br />\n            Please select 3 more watched movies that are different from the movies you usually watch yet are interesting to you. \n            <br />\n            Kindly avoid the 5 movies which you have already answered questions about.\n          </div>\n\n          <div style={{ textAlign: \"right\" }}>\n            <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.handleInstructionOk()}>\n              Proceed\n                        </Button>\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}  \n"]},"metadata":{},"sourceType":"module"}