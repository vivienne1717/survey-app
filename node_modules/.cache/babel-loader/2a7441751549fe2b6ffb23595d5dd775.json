{"ast":null,"code":"var _jsxFileName = \"/Users/wei/Desktop/Project/Recommendation/Pre-exp Survey/website/survey-app1-1/src/Pages/Part1Modal.jsx\";\nimport React from \"react\";\nimport \"./Part1Modal.css\";\nimport { Modal, Button } from 'antd';\nimport { Steps, message } from 'antd';\nimport SurveyWithPoster from './SurveyWithPoster';\nimport Step4Survey from './Step4Survey';\nimport Cookies from 'universal-cookie';\nexport default class Part1Modal extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      step4visible: false,\n      current: 0,\n      current2: 0,\n      navigate: false,\n      step4movies: [{\n        title: null,\n        rating: null,\n        ans: [8, 8, 8, 8, 8, 8, 8]\n      } // }, {\n      //   title: null,\n      //   rating: null,\n      //   ans: [8, 8, 8, 8]\n      // }, {\n      //   title: null,\n      //   rating: null,\n      //   ans: [8, 8, 8, 8]\n      // }\n      ],\n      instructionVisible: false\n    };\n\n    this.toggleVisible = () => {\n      var visible = this.state.visible;\n      this.setState({\n        visible: !visible\n      });\n    };\n\n    this.handleOk = () => {};\n\n    this.handleCancel = () => {\n      var visible = false;\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleCancel2 = () => {\n      var visible = false;\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.handleInstructionOk = () => {\n      this.setState({\n        instructionVisible: false\n      }, () => {\n        window.location.href = '../Step3';\n      });\n    };\n  }\n\n  next() {\n    console.log(\"value \" + JSON.stringify(this.props.selectedMovies));\n\n    if (this.validationSingleRating(this.props.selectedMovies[this.state.current])) {\n      const current = this.state.current + 1;\n      this.setState({\n        current\n      });\n    }\n  }\n\n  validationSingleRating(movie) {\n    var ans = movie.ans;\n\n    if (ans.lengt == 4) {\n      if (ans[0] == 8 || ans[1] == 8 || ans[2] == 8 || ans[3] == 8 || ans[4] == 8 || ans[5] == 8 || ans[6] == 8) {\n        message.error('Please complete all questions');\n        return false;\n      } else {\n        return true;\n      }\n    } // else {\n    //   if (ans[0] == 8 || ans[1] == 8 || ans[2] == 8) {\n    //     message.error('Please complete all questions')\n    //     return false;\n    //   } else {\n    //     return true;\n    //   }\n    // }\n\n  }\n\n  prev() {\n    const current = this.state.current - 1;\n    this.setState({\n      current\n    });\n  }\n\n  validateSingleStep4Movie(movie) {\n    var title = movie.title;\n    var rating = movie.rating;\n    var ans = movie.ans;\n\n    if (title == null || rating == null || ans[0] == 8 || ans[1] == 8 || ans[2] == 8 || ans[3] == 8) {\n      message.info('Please complete all questions');\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  next2() {\n    var step4movies = this.state.step4movies;\n\n    if (this.validateSingleStep4Movie(step4movies[this.state.current2])) {\n      const current2 = this.state.current2 + 1;\n      this.setState({\n        current2\n      });\n    }\n  }\n\n  prev2() {\n    const current2 = this.state.current2 - 1;\n    this.setState({\n      current2\n    });\n  }\n\n  done() {\n    //validate all answers \n    if (!this.props.fromStep3) {\n      var selectedMovies = this.props.selectedMovies;\n\n      for (var i = 0; i < selectedMovies.length; i++) {\n        var movie = selectedMovies[i];\n        var ans = movie.ans;\n\n        for (var i = 0; i < ans.length; i++) {\n          if (ans === 8) {\n            message.error('Please complete survery for movie: ' + movie.title);\n            return false;\n          }\n        }\n      }\n\n      const cookies = new Cookies();\n      cookies.set('survey2', this.reduceCookieSize(selectedMovies), {\n        path: '/'\n      });\n      console.log(\"survey 2a \" + JSON.stringify(cookies.get('survey2a')));\n      console.log(\"survey 2 \" + JSON.stringify(selectedMovies));\n      this.setState({\n        instructionVisible: true\n      });\n    } else {\n      var selectedMovies = this.props.selectedMovies;\n      const cookies = new Cookies();\n      cookies.set('survey3', this.reduceCookieSize(selectedMovies), {\n        path: '/'\n      });\n      console.log(\"survey 3: \" + JSON.stringify(selectedMovies));\n      this.setState({\n        visible: false,\n        step4visible: true\n      });\n    }\n  }\n\n  reduceCookieSize(selectedMovies) {\n    let slimCookie = [];\n\n    for (var i = 0; i < selectedMovies.length; i++) {\n      var movie = {};\n      movie.title = selectedMovies[i].title;\n      movie.movieId = selectedMovies[i].movieId;\n      movie.rating = selectedMovies[i].rating;\n      movie.ans = selectedMovies[i].ans;\n      slimCookie.push(movie);\n    }\n\n    return slimCookie;\n  }\n\n  done2() {\n    const cookies = new Cookies();\n    console.log(\"step 1 \" + JSON.stringify(cookies.get('survey1')));\n    console.log(\"Survey 2a \" + JSON.stringify(cookies.get('survey2a')));\n    console.log(\"survey 2 \" + JSON.stringify(cookies.get('survey2')));\n    console.log(\"survey 3: \" + JSON.stringify(cookies.get('survey3')));\n    console.log(\"Step 4 \" + JSON.stringify(this.state.step4movies));\n    var survey1 = cookies.get('survey1');\n    var survey2 = cookies.get('survey2');\n    var survey3 = cookies.get('survey3');\n    var survey2a = cookies.get('survey2a');\n    var survey4 = this.state.step4movies; //for console print only, to generate sample upload file\n\n    var result = {\n      survey1: survey1,\n      survey2: survey2,\n      survey2a: survey2a,\n      survey3: survey3,\n      survey4: survey4\n    };\n    console.log('result ' + JSON.stringify(result)); //need to only validate last survey question survey[2] for three movies\n\n    if (this.validateSingleStep4Movie(survey4[0])) {\n      var db = new window.restdb(\"5e3e33014c212c51488ad26a\");\n      var p = new db.response({\n        survey1: survey1,\n        survey2: survey2,\n        survey2a: survey2a,\n        survey3: survey3,\n        survey4: survey4\n      });\n      p.save();\n      const key = 'updatable';\n      message.loading({\n        content: 'Submitting...',\n        key\n      });\n      setTimeout(() => {\n        message.success({\n          content: 'Sumbitted!',\n          key,\n          duration: 2\n        });\n        cookies.remove('survey1', {\n          path: '/'\n        });\n        cookies.remove('survey2', {\n          path: '/'\n        });\n        cookies.remove('survey2a', {\n          path: '/'\n        });\n        cookies.remove('survey3', {\n          path: '/'\n        });\n        window.location.href = '../Acknowledge';\n      }, 5000); //change the submit wating time (2000=2s)\n    }\n  }\n\n  render() {\n    var selectedMovies = this.props.selectedMovies;\n    var step4movies = this.state.step4movies;\n    const Step = Steps.Step;\n    var steps;\n\n    if (this.props.fromStep3) {\n      steps = [{\n        title: '1st Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[0],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }, \"1\")\n      }, {\n        title: '2nd Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[1],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257\n          },\n          __self: this\n        }, \"2\")\n      }, {\n        title: '3rd Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[2],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262\n          },\n          __self: this\n        }, \"3\")\n      }];\n    } else {\n      steps = [{\n        title: '1st Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[0],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271\n          },\n          __self: this\n        }, \"1\")\n      }, {\n        title: '2nd Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[1],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276\n          },\n          __self: this\n        }, \"2\")\n      }, {\n        title: '3rd Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[2],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, \"3\")\n      }, {\n        title: '4th Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[3],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, \"4\")\n      }, {\n        title: '5th Movie',\n        content: React.createElement(SurveyWithPoster, {\n          movie: selectedMovies[4],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, \"5\")\n      }];\n    }\n\n    const step4Survey = [{\n      title: 'Movie',\n      content: React.createElement(Step4Survey, {\n        movie: step4movies[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      })\n    } // {\n    //   title: '2nd Movie',\n    //   content: <Step4Survey movie={step4movies[1]}></Step4Survey>\n    // },\n    // {\n    //   title: '3rd Movie',\n    //   content: <Step4Survey movie={step4movies[2]}></Step4Survey>\n    // }\n    ];\n    const current = this.state.current;\n    const current2 = this.state.current2;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      visible: this.state.visible,\n      title: this.props.fromStep3 ? '' : \"Survey Part 2\",\n      onOk: this.handleOk,\n      width: 1300,\n      closable: false,\n      maskClosable: false,\n      onCancel: this.handleCancel,\n      footer: null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"instruction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, \"Please answer 7 questions for each movie.\"), React.createElement(Steps, {\n      current: current,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, steps.map(item => React.createElement(Step, {\n      key: item.title,\n      title: item.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"steps-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, steps[current].content), React.createElement(\"div\", {\n      className: \"steps-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, current > 0 && React.createElement(Button, {\n      onClick: () => this.prev(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, \"Previous\"), current < steps.length - 1 && React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.next(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, \"Next\"), current === steps.length - 1 && React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.done(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, this.props.fromStep3 ? 'Proceed to part 4' : 'Proceed to part 3'))), React.createElement(Modal, {\n      visible: this.state.step4visible,\n      title: \"Survey Part 4\",\n      onOk: this.handleOk,\n      width: window.innerWidth - 100,\n      closable: false,\n      maskClosable: false,\n      onCancel: this.handleCancel,\n      footer: null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"instruction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }, \"Please list one movie that is different from the movies you usually watch, yet you will find interesting if your friend recommends it to you.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 374\n      },\n      __self: this\n    }), \"This movie should not be one of the movies that you have just rated.\"), React.createElement(Steps, {\n      current: current2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, step4Survey.map(item => React.createElement(Step, {\n      key: item.title,\n      title: item.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"steps-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, step4Survey[current2].content), React.createElement(\"div\", {\n      className: \"steps-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, current2 > 0 && React.createElement(Button, {\n      onClick: () => this.prev2(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, \"Previous\"), current2 < step4Survey.length - 1 && React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.next2(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, \"Next\"), current2 === step4Survey.length - 1 && React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.done2(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }, \"Sumbit results\"))), React.createElement(Modal, {\n      visible: this.state.instructionVisible,\n      title: \"Survey Part 3\",\n      onOk: this.handleOk,\n      width: window.innerWidth - 500,\n      closable: false,\n      maskClosable: false,\n      footer: null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"question\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412\n      },\n      __self: this\n    }, \"Instruction:\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 414\n      },\n      __self: this\n    }), \"Please select 3 more watched movies that are different from the movies you usually watch yet are interesting to you.\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416\n      },\n      __self: this\n    }), \"Kindly avoid the 5 movies which you have already answered questions about.\"), React.createElement(\"div\", {\n      style: {\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        marginLeft: 8\n      },\n      type: \"primary\",\n      onClick: () => this.handleInstructionOk(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421\n      },\n      __self: this\n    }, \"Proceed\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/wei/Desktop/Project/Recommendation/Pre-exp Survey/website/survey-app1-1/src/Pages/Part1Modal.jsx"],"names":["React","Modal","Button","Steps","message","SurveyWithPoster","Step4Survey","Cookies","Part1Modal","Component","state","visible","step4visible","current","current2","navigate","step4movies","title","rating","ans","instructionVisible","toggleVisible","setState","handleOk","handleCancel","handleCancel2","handleInstructionOk","window","location","href","next","console","log","JSON","stringify","props","selectedMovies","validationSingleRating","movie","lengt","error","prev","validateSingleStep4Movie","info","next2","prev2","done","fromStep3","i","length","cookies","set","reduceCookieSize","path","get","slimCookie","movieId","push","done2","survey1","survey2","survey3","survey2a","survey4","result","db","restdb","p","response","save","key","loading","content","setTimeout","success","duration","remove","render","Step","steps","step4Survey","map","item","marginLeft","innerWidth","textAlign"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Part1Modal.css\";\nimport { Modal, Button } from 'antd';\nimport { Steps, message } from 'antd';\nimport SurveyWithPoster from './SurveyWithPoster';\nimport Step4Survey from './Step4Survey';\nimport Cookies from 'universal-cookie';\n\nexport default class Part1Modal extends React.Component {\n\n  /* example of this.props.movie\n  \t\"movieId\": 180471,\n\t\"title\": \"The Venerable W.\",\n\t\"directedBy\": \"Barbet Schroeder\",\n\t\"starring\": \"Bulle Ogier,Barbet Schroeder,Ashin Wirathu\",\n\t\"imdbId\": \"6642870\",\n\t\"genres\": \"Documentary\",\n\t\"year\": 2017,\n\t\"posterURL\": \"https://m.media-amazon.com/images/M/MV5BMjI0MDUxNTAzOF5BMl5BanBnXkFtZTgwOTEwOTIzMjI@._V1_SX300.jpg\"\n  \n  */\n  state = {\n    visible: false,\n    step4visible: false,\n    current: 0,\n    current2: 0,\n    navigate: false,\n    step4movies: [\n      {\n        title: null,\n        rating: null,\n        ans: [8, 8, 8, 8, 8, 8, 8]\n      }\n      // }, {\n      //   title: null,\n      //   rating: null,\n      //   ans: [8, 8, 8, 8]\n      // }, {\n      //   title: null,\n      //   rating: null,\n      //   ans: [8, 8, 8, 8]\n      // }\n    ],\n    instructionVisible: false\n  }\n\n  toggleVisible = () => {\n    var visible = this.state.visible\n    this.setState({\n      visible: !visible\n    })\n  }\n\n  handleOk = () => {\n\n  }\n  handleCancel = () => {\n    var visible = false;\n    this.setState({\n      visible: false\n    })\n  }\n\n  next() {\n    console.log(\"value \" + JSON.stringify(this.props.selectedMovies))\n    if (this.validationSingleRating(this.props.selectedMovies[this.state.current])) {\n      const current = this.state.current + 1;\n      this.setState({ current });\n    }\n  }\n\n  validationSingleRating(movie) {\n    var ans = movie.ans\n    if (ans.lengt == 4) {\n      if (ans[0] == 8 || ans[1] == 8 || ans[2] == 8 || ans[3] == 8 || ans[4] == 8 || ans[5] == 8 || ans[6] ==8){\n        message.error('Please complete all questions')\n        return false;\n      } else {\n        return true;\n      }\n    } \n    // else {\n    //   if (ans[0] == 8 || ans[1] == 8 || ans[2] == 8) {\n    //     message.error('Please complete all questions')\n    //     return false;\n    //   } else {\n    //     return true;\n    //   }\n    // }\n  }\n\n  prev() {\n    const current = this.state.current - 1;\n    this.setState({ current });\n  }\n\n  handleCancel2 = () => {\n    var visible = false;\n    this.setState({\n      visible: false\n    })\n  }\n\n  validateSingleStep4Movie(movie) {\n    var title = movie.title\n    var rating = movie.rating\n    var ans = movie.ans\n    if (title == null || rating == null || ans[0] == 8 || ans[1] == 8 || ans[2] == 8 || ans[3] == 8 ){\n      message.info('Please complete all questions')\n      return false;\n    } else {\n      return true;\n    }\n\n  }\n  next2() {\n    var step4movies = this.state.step4movies\n    if (this.validateSingleStep4Movie(step4movies[this.state.current2])) {\n      const current2 = this.state.current2 + 1;\n      this.setState({ current2 });\n    }\n  }\n\n  prev2() {\n    const current2 = this.state.current2 - 1;\n    this.setState({ current2 });\n  }\n  done() {\n    //validate all answers \n    if (!this.props.fromStep3) {\n      var selectedMovies = this.props.selectedMovies\n\n      for (var i = 0; i < selectedMovies.length; i++) {\n        var movie = selectedMovies[i]\n        var ans = movie.ans\n        for (var i = 0; i < ans.length; i++) {\n          if (ans === 8) {\n            message.error('Please complete survery for movie: ' + movie.title)\n            return false;\n          }\n        }\n      }\n      const cookies = new Cookies();\n      cookies.set('survey2', this.reduceCookieSize(selectedMovies), { path: '/' });\n      console.log(\"survey 2a \"+ JSON.stringify(cookies.get('survey2a')))\n      console.log(\"survey 2 \" + JSON.stringify(selectedMovies))\n\n      this.setState({\n        instructionVisible: true\n      })\n    } else {\n      var selectedMovies = this.props.selectedMovies\n\n      const cookies = new Cookies();\n      cookies.set('survey3', this.reduceCookieSize(selectedMovies), { path: '/' });\n      console.log(\"survey 3: \" + JSON.stringify(selectedMovies))\n      this.setState({\n        visible: false,\n        step4visible: true\n      })\n    }\n  }\n  handleInstructionOk = () => {\n    this.setState({\n      instructionVisible: false\n    }, () => {\n      window.location.href = '../Step3'\n    })\n  }\n\n  reduceCookieSize(selectedMovies){\n    let slimCookie = [] \n    for(var i=0;i<selectedMovies.length;i++){\n      var movie = {}\n      movie.title = selectedMovies[i].title\n      movie.movieId = selectedMovies[i].movieId\n      movie.rating = selectedMovies[i].rating\n      movie.ans = selectedMovies[i].ans\n      slimCookie.push(movie)\n    }\n\n    return slimCookie;\n  }\n\n  done2() {\n\n    const cookies = new Cookies();\n\n    console.log(\"step 1 \" + JSON.stringify(cookies.get('survey1')))\n    console.log(\"Survey 2a \"+JSON.stringify(cookies.get('survey2a')))\n    console.log(\"survey 2 \" + JSON.stringify(cookies.get('survey2')))\n\n    console.log(\"survey 3: \" + JSON.stringify(cookies.get('survey3')))\n\n    console.log(\"Step 4 \" + JSON.stringify(this.state.step4movies))\n    var survey1 = cookies.get('survey1')\n    var survey2 = cookies.get('survey2')\n    var survey3 = cookies.get('survey3')\n    var survey2a =  cookies.get('survey2a')\n    var survey4 = this.state.step4movies\n\n    //for console print only, to generate sample upload file\n    var result = {\n         survey1: survey1,\n        survey2: survey2,\n        survey2a:survey2a,\n        survey3: survey3,\n        survey4: survey4\n    }\n    console.log('result '+JSON.stringify(result))\n    //need to only validate last survey question survey[2] for three movies\n    if (this.validateSingleStep4Movie(survey4[0])) {\n  \n\n      var db = new window.restdb(\"5e3e33014c212c51488ad26a\");\n      var p = new db.response({\n        survey1: survey1,\n        survey2: survey2,\n        survey2a:survey2a,\n        survey3: survey3,\n        survey4: survey4\n      });\n      p.save();\n\n      const key = 'updatable';\n      message.loading({ content: 'Submitting...', key });\n      setTimeout(() => {\n        message.success({ content: 'Sumbitted!', key, duration: 2 });\n           cookies.remove('survey1', { path: '/' });\n       cookies.remove('survey2', { path: '/' });\n       cookies.remove('survey2a', { path: '/' });\n       cookies.remove('survey3', { path: '/' });\n        window.location.href = '../Acknowledge'\n      }, 5000);//change the submit wating time (2000=2s)\n    }\n  }\n\n  \n\n  render() {\n\n    var selectedMovies = this.props.selectedMovies\n    var step4movies = this.state.step4movies\n\n    const { Step } = Steps;\n\n    var steps;\n    if (this.props.fromStep3) {\n      steps = [\n        {\n          title: '1st Movie',\n          content: <SurveyWithPoster movie={selectedMovies[0]}>1</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '2nd Movie',\n          content: <SurveyWithPoster movie={selectedMovies[1]}>2</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '3rd Movie',\n          content: <SurveyWithPoster movie={selectedMovies[2]}>3</SurveyWithPoster>\n          ,\n        }\n      ];\n\n    } else {\n      steps = [\n        {\n          title: '1st Movie',\n          content: <SurveyWithPoster movie={selectedMovies[0]}>1</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '2nd Movie',\n          content: <SurveyWithPoster movie={selectedMovies[1]}>2</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '3rd Movie',\n          content: <SurveyWithPoster movie={selectedMovies[2]}>3</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '4th Movie',\n          content: <SurveyWithPoster movie={selectedMovies[3]}>4</SurveyWithPoster>\n          ,\n        },\n        {\n          title: '5th Movie',\n          content: <SurveyWithPoster movie={selectedMovies[4]}>5</SurveyWithPoster>\n          ,\n        }\n      ];\n    }\n\n    const step4Survey = [\n      {\n        title: 'Movie',\n        content: <Step4Survey movie={step4movies[0]}></Step4Survey>\n      },\n      // {\n      //   title: '2nd Movie',\n      //   content: <Step4Survey movie={step4movies[1]}></Step4Survey>\n      // },\n      // {\n      //   title: '3rd Movie',\n      //   content: <Step4Survey movie={step4movies[2]}></Step4Survey>\n      // }\n    ]\n\n\n    const { current } = this.state;\n    const { current2 } = this.state;\n\n    return (\n\n      <div>\n        <Modal\n          visible={this.state.visible}\n          title={this.props.fromStep3 ? '' : \"Survey Part 2\"}\n          onOk={this.handleOk}\n          width={1300}\n          closable={false}\n          maskClosable={false}\n          onCancel={this.handleCancel}\n          footer={null}\n        >\n          \n          <div className='instruction'>\n            Please answer 7 questions for each movie.  \n          </div>\n         \n          <Steps current={current}>\n            {steps.map(item => (\n              <Step key={item.title} title={item.title} />\n            ))}\n          </Steps>\n          <div className=\"steps-content\">{steps[current].content}</div>\n          <div className=\"steps-action\">\n            {current > 0 && (\n              <Button onClick={() => this.prev()}>\n                Previous\n            </Button>\n            )}\n            {current < steps.length - 1 && (\n              <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.next()}>\n                Next\n            </Button>\n            )}\n            {current === steps.length - 1 && (\n              <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.done()}>\n\n                {this.props.fromStep3 ? 'Proceed to part 4' : 'Proceed to part 3'}\n              </Button>\n            )}\n\n          </div>\n\n        </Modal>\n        \n        <Modal\n          visible={this.state.step4visible}\n          title=\"Survey Part 4\"\n          onOk={this.handleOk}\n          width={window.innerWidth-100}\n          closable={false}\n          maskClosable={false}\n          onCancel={this.handleCancel}\n          footer={null}\n        >\n          <div className='instruction'>\n            Please list one movie that is different from the movies you usually watch, yet you will find interesting if your friend recommends it to you. \n            <br />\n            This movie should not be one of the movies that you have just rated.\n          </div>\n          <Steps current={current2}>\n            {step4Survey.map(item => (\n              <Step key={item.title} title={item.title} />\n            ))}\n          </Steps>\n          <div className=\"steps-content\">{step4Survey[current2].content}</div>\n          <div className=\"steps-action\">\n            {current2 > 0 && (\n              <Button onClick={() => this.prev2()}>\n                Previous\n            </Button>\n            )}\n            {current2 < step4Survey.length - 1 && (\n              <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.next2()}>\n                Next\n            </Button>\n            )}\n            {current2 === step4Survey.length - 1 && (\n              <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.done2()}>\n                Sumbit results\n              </Button>\n            )}\n\n          </div>\n        </Modal>\n\n        <Modal\n          visible={this.state.instructionVisible}\n          title=\"Survey Part 3\"\n          onOk={this.handleOk}\n          width={window.innerWidth-500}\n          closable={false}\n          maskClosable={false}\n          footer={null}\n        >\n          <div className='question'>\n            Instruction: \n            <br /><br />\n            Please select 3 more watched movies that are different from the movies you usually watch yet are interesting to you. \n            <br />\n            Kindly avoid the 5 movies which you have already answered questions about.\n          </div>\n\n          <div style={{ textAlign: \"right\" }}>\n            <Button style={{ marginLeft: 8 }} type=\"primary\" onClick={() => this.handleInstructionOk()}>\n              Proceed\n                        </Button>\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}  \n"]},"metadata":{},"sourceType":"module"}